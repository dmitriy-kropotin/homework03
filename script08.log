Script started on 2022-02-11 13:48:35+03:00
]0;tesla@ol85:~/homework03[tesla@ol85 homework03]$ vagrant ssh
[0;31mVM must be created before running this command. Run `vagrant up` first.[0m
]0;tesla@ol85:~/homework03[tesla@ol85 homework03]$ vagrant ssh[1Pup
[0mBringing machine 'lvm03' up with 'virtualbox' provider...[0m
[1m==> lvm03: Importing base box 'centos/7'...[0m
[0m[K[0m[0mProgress: 20%[0m[0m[K[0m[0mProgress: 40%[0m[0m[K[0m[0mProgress: 70%[0m[0m[K[0m[0mProgress: 90%[0m[0m[K[0m[1m==> lvm03: Matching MAC address for NAT networking...[0m
[1m==> lvm03: Checking if box 'centos/7' version '1804.02' is up to date...[0m
[1m==> lvm03: Setting the name of the VM: homework03_lvm03_1644576529757_62180[0m
[1m==> lvm03: Clearing any previously set network interfaces...[0m
[1m==> lvm03: Preparing network interfaces based on configuration...[0m
[0m    lvm03: Adapter 1: nat[0m
[1m==> lvm03: Forwarding ports...[0m
[0m    lvm03: 22 (guest) => 2222 (host) (adapter 1)[0m
[1m==> lvm03: Running 'pre-boot' VM customizations...[0m
[1m==> lvm03: Booting VM...[0m
[1m==> lvm03: Waiting for machine to boot. This may take a few minutes...[0m
[0m    lvm03: SSH address: 127.0.0.1:2222[0m
[0m    lvm03: SSH username: vagrant[0m
[0m    lvm03: SSH auth method: private key[0m
[0m    lvm03: 
    lvm03: Vagrant insecure key detected. Vagrant will automatically replace
    lvm03: this with a newly generated keypair for better security.[0m
[0m    lvm03: 
    lvm03: Inserting generated public key within guest...[0m
[0m    lvm03: Removing insecure key from the guest if it's present...[0m
[0m    lvm03: Key inserted! Disconnecting and reconnecting using new SSH key...[0m
[1m==> lvm03: Machine booted and ready![0m
[1m==> lvm03: Checking for guest additions in VM...[0m
[0m    lvm03: No guest additions were detected on the base box for this VM! Guest
    lvm03: additions are required for forwarded ports, shared folders, host only
    lvm03: networking, and more. If SSH fails on this machine, please install
    lvm03: the guest additions and repackage the box to continue.
    lvm03: 
    lvm03: This is not an error message; everything may continue to work properly,
    lvm03: in which case you may ignore this message.[0m
[1m==> lvm03: Setting hostname...[0m
[1m==> lvm03: Rsyncing folder: /home/tesla/homework03/ => /vagrant[0m
[1m==> lvm03: Running provisioner: shell...[0m
[0m    lvm03: Running: inline script[0m
[0;32m    lvm03: Loaded plugins: fastestmirror[0m
[0;32m    lvm03: Determining fastest mirrors[0m
[0;32m    lvm03:  * base: mirror.sale-dedic.com[0m
[0;32m    lvm03:  * extras: mirror.sale-dedic.com[0m
[0;32m    lvm03:  * updates: mirror.sale-dedic.com[0m
[0;32m    lvm03: Resolving Dependencies[0m
[0;32m    lvm03: --> Running transaction check[0m
[0;32m    lvm03: ---> Package gdisk.x86_64 0:0.8.10-3.el7 will be installed[0m
[0;32m    lvm03: ---> Package hdparm.x86_64 0:9.43-5.el7 will be installed[0m
[0;32m    lvm03: ---> Package mdadm.x86_64 0:4.1-8.el7_9 will be installed[0m
[0;32m    lvm03: --> Processing Dependency: libreport-filesystem for package: mdadm-4.1-8.el7_9.x86_64[0m
[0;32m    lvm03: ---> Package smartmontools.x86_64 1:7.0-2.el7 will be installed[0m
[0;32m    lvm03: --> Processing Dependency: mailx for package: 1:smartmontools-7.0-2.el7.x86_64[0m
[0;32m    lvm03: --> Running transaction check[0m
[0;32m    lvm03: ---> Package libreport-filesystem.x86_64 0:2.1.11-53.el7.centos will be installed[0m
[0;32m    lvm03: ---> Package mailx.x86_64 0:12.5-19.el7 will be installed[0m
[0;32m    lvm03: --> Finished Dependency Resolution[0m
[0;32m    lvm03: [0m
[0;32m    lvm03: Dependencies Resolved[0m
[0;32m    lvm03: [0m
[0;32m    lvm03: ================================================================================[0m
[0;32m    lvm03:  Package                  Arch       Version                  Repository   Size[0m
[0;32m    lvm03: ================================================================================[0m
[0;32m    lvm03: Installing:[0m
[0;32m    lvm03:  gdisk                    x86_64     0.8.10-3.el7             base        190 k[0m
[0;32m    lvm03:  hdparm                   x86_64     9.43-5.el7               base         83 k[0m
[0;32m    lvm03:  mdadm                    x86_64     4.1-8.el7_9              updates     440 k[0m
[0;32m    lvm03:  smartmontools            x86_64     1:7.0-2.el7              base        546 k[0m
[0;32m    lvm03: Installing for dependencies:[0m
[0;32m    lvm03:  libreport-filesystem     x86_64     2.1.11-53.el7.centos     base         41 k[0m
[0;32m    lvm03:  mailx                    x86_64     12.5-19.el7              base        245 k[0m
[0;32m    lvm03: [0m
[0;32m    lvm03: Transaction Summary[0m
[0;32m    lvm03: ================================================================================[0m
[0;32m    lvm03: Install  4 Packages (+2 Dependent packages)[0m
[0;32m    lvm03: [0m
[0;32m    lvm03: Total download size: 1.5 M[0m
[0;32m    lvm03: Installed size: 4.3 M[0m
[0;32m    lvm03: Downloading packages:[0m
[0;32m    lvm03: Public key for hdparm-9.43-5.el7.x86_64.rpm is not installed[0m
[0;31m    lvm03: warning: /var/cache/yum/x86_64/7/base/packages/hdparm-9.43-5.el7.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY[0m
[0;32m    lvm03: Public key for mdadm-4.1-8.el7_9.x86_64.rpm is not installed[0m
[0;32m    lvm03: --------------------------------------------------------------------------------[0m
[0;32m    lvm03: Total                                              1.4 MB/s | 1.5 MB  00:01[0m
[0;32m    lvm03: Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7[0m
[0;31m    lvm03: Importing GPG key 0xF4A80EB5:[0m
[0;31m    lvm03:  Userid     : "CentOS-7 Key (CentOS 7 Official Signing Key) <security@centos.org>"[0m
[0;31m    lvm03:  Fingerprint: 6341 ab27 53d7 8a78 a7c2 7bb1 24c6 a8a7 f4a8 0eb5[0m
[0;31m    lvm03:  Package    : centos-release-7-5.1804.el7.centos.x86_64 (@anaconda)[0m
[0;31m    lvm03:  From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7[0m
[0;32m    lvm03: Running transaction check[0m
[0;32m    lvm03: Running transaction test[0m
[0;32m    lvm03: Transaction test succeeded[0m
[0;32m    lvm03: Running transaction[0m
[0;32m    lvm03:   Installing : libreport-filesystem-2.1.11-53.el7.centos.x86_64             1/6[0m
[0;32m    lvm03:   Installing : mailx-12.5-19.el7.x86_64                                     2/6[0m
[0;32m    lvm03:   Installing : 1:smartmontools-7.0-2.el7.x86_64                             3/6[0m
[0;32m    lvm03:   Installing : mdadm-4.1-8.el7_9.x86_64                                     4/6[0m
[0;32m    lvm03:   Installing : hdparm-9.43-5.el7.x86_64                                     5/6[0m
[0;32m    lvm03:   Installing : gdisk-0.8.10-3.el7.x86_64                                    6/6[0m
[0;32m    lvm03:   Verifying  : 1:smartmontools-7.0-2.el7.x86_64                             1/6[0m
[0;32m    lvm03:   Verifying  : mdadm-4.1-8.el7_9.x86_64                                     2/6[0m
[0;32m    lvm03:   Verifying  : gdisk-0.8.10-3.el7.x86_64                                    3/6[0m
[0;32m    lvm03:   Verifying  : mailx-12.5-19.el7.x86_64                                     4/6[0m
[0;32m    lvm03:   Verifying  : hdparm-9.43-5.el7.x86_64                                     5/6[0m
[0;32m    lvm03:   Verifying  : libreport-filesystem-2.1.11-53.el7.centos.x86_64             6/6[0m
[0;32m    lvm03: [0m
[0;32m    lvm03: Installed:[0m
[0;32m    lvm03:   gdisk.x86_64 0:0.8.10-3.el7          hdparm.x86_64 0:9.43-5.el7[0m
[0;32m    lvm03:   mdadm.x86_64 0:4.1-8.el7_9           smartmontools.x86_64 1:7.0-2.el7[0m
[0;32m    lvm03: [0m
[0;32m    lvm03: Dependency Installed:[0m
[0;32m    lvm03:   libreport-filesystem.x86_64 0:2.1.11-53.el7.centos mailx.x86_64 0:12.5-19.el7[0m
[0;32m    lvm03: [0m
[0;32m    lvm03: Complete![0m
]0;tesla@ol85:~/homework03[tesla@ol85 homework03]$ vagrant ssh
]0;vagrant@lvm03:~[?1034h[vagrant@lvm03 ~]$ sudo -i
]0;root@lvm03:~[?1034h[root@lvm03 ~]# 
]0;root@lvm03:~[root@lvm03 ~]# yum install xfsdumo[Kp
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.sale-dedic.com
 * extras: mirror.sale-dedic.com
 * updates: mirror.sale-dedic.com
Resolving Dependencies
--> Running transaction check
---> Package xfsdump.x86_64 0:3.1.7-1.el7 will be installed
--> Processing Dependency: attr >= 2.0.0 for package: xfsdump-3.1.7-1.el7.x86_64
--> Running transaction check
---> Package attr.x86_64 0:2.4.46-13.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

========================================================================================================================
 Package                    Arch                      Version                             Repository               Size
========================================================================================================================
Installing:
 xfsdump                    x86_64                    3.1.7-1.el7                         base                    308 k
Installing for dependencies:
 attr                       x86_64                    2.4.46-13.el7                       base                     66 k

Transaction Summary
========================================================================================================================
Install  1 Package (+1 Dependent package)

Total download size: 374 k
Installed size: 1.1 M
Is this ok [y/d/N]: y
Downloading packages:
(1/2): attr-2.4.46-13.el7.x86_64.rpm                                                             |  66 kB  00:00:00     
(2/2): xfsdump-3.1.7-1.el7.x86_64.rpm                                                            | 308 kB  00:00:00     
------------------------------------------------------------------------------------------------------------------------
Total                                                                                   1.1 MB/s | 374 kB  00:00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : attr-2.4.46-13.el7.x86_64 [                                                                        ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [####                                                                    ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [############                                                            ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [###################                                                     ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [#####################                                                   ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [############################                                            ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [##############################                                          ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [####################################                                    ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [######################################                                  ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [#############################################                           ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [##############################################                          ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [################################################                        ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [###################################################                     ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [#####################################################                   ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [#######################################################                 ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [##########################################################              ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [############################################################            ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [##############################################################          ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [#################################################################       ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [###################################################################     ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [#####################################################################   ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [######################################################################  ] 1/2  Installing : attr-2.4.46-13.el7.x86_64 [####################################################################### ] 1/2  Installing : attr-2.4.46-13.el7.x86_64                                                                            1/2 
  Installing : xfsdump-3.1.7-1.el7.x86_64 [                                                                       ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [####                                                                   ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [#########                                                              ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [##############                                                         ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [##################                                                     ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [#####################                                                  ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [##########################                                             ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [###############################                                        ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [###################################                                    ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [########################################                               ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [#############################################                          ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [#################################################                      ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [####################################################                   ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [######################################################                 ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [########################################################               ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [#############################################################          ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [###############################################################        ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [###################################################################    ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [####################################################################   ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [#####################################################################  ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64 [###################################################################### ] 2/2  Installing : xfsdump-3.1.7-1.el7.x86_64                                                                           2/2 
  Verifying  : attr-2.4.46-13.el7.x86_64                                                                            1/2 
  Verifying  : xfsdump-3.1.7-1.el7.x86_64                                                                           2/2 

Installed:
  xfsdump.x86_64 0:3.1.7-1.el7                                                                                          

Dependency Installed:
  attr.x86_64 0:2.4.46-13.el7                                                                                           

Complete!
]0;root@lvm03:~[root@lvm03 ~]# pvcreq[Kate /dev/sdb
  Physical volume "/dev/sdb" successfully created.
]0;root@lvm03:~[root@lvm03 ~]# vgcreate vgroot /dev/sdb
  Volume group "vgroot" successfully created
]0;root@lvm03:~[root@lvm03 ~]# lvcreate -n lvroot -l100%FREE /dev/vgroot
  Logical volume "lvroot" created.
]0;root@lvm03:~[root@lvm03 ~]# mkfs.xfs /e[Kdev/g[Kvgroot/lvroot
meta-data=/dev/vgroot/lvroot     isize=512    agcount=4, agsize=655104 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=0, sparse=0
data     =                       bsize=4096   blocks=2620416, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
]0;root@lvm03:~[root@lvm03 ~]# mount /dev/vgroot/lvroot /mnt
]0;root@lvm03:~[root@lvm03 ~]# xfsdump -J - /dev/VolGroup00/LogVol00 | xfsrestore -J - /mnt
xfsdump: using file dump (drive_simple) strategy
xfsdump: version 3.1.7 (dump format 3.0)
xfsdump: level 0 dump of lvm03:/
xfsdump: dump date: Fri Feb 11 10:52:34 2022
xfsdump: session id: 164e4ac4-b902-4ccf-8897-4280410c61bb
xfsdump: session label: ""
xfsrestore: using file dump (drive_simple) strategy
xfsrestore: version 3.1.7 (dump format 3.0)
xfsrestore: searching media for dump
xfsdump: ino map phase 1: constructing initial dump list
xfsdump: ino map phase 2: skipping (no pruning necessary)
xfsdump: ino map phase 3: skipping (only one dump stream)
xfsdump: ino map construction complete
xfsdump: estimated dump size: 807825984 bytes
xfsdump: creating dump session media file 0 (media 0, file 0)
xfsdump: dumping ino map
xfsdump: dumping directories
xfsrestore: examining media file 0
xfsrestore: dump description: 
xfsrestore: hostname: lvm03
xfsrestore: mount point: /
xfsrestore: volume: /dev/mapper/VolGroup00-LogVol00
xfsrestore: session time: Fri Feb 11 10:52:34 2022
xfsrestore: level: 0
xfsrestore: session label: ""
xfsrestore: media label: ""
xfsrestore: file system id: b60e9498-0baa-4d9f-90aa-069048217fee
xfsrestore: session id: 164e4ac4-b902-4ccf-8897-4280410c61bb
xfsrestore: media id: 0598b6f2-922a-4404-b3d0-9bcfcff1235b
xfsrestore: searching media for directory dump
xfsrestore: reading directories
xfsdump: dumping non-directory files
xfsrestore: 2716 directories and 23672 entries processed
xfsrestore: directory post-processing
xfsrestore: restoring non-directory files
xfsdump: ending media file
xfsdump: media file size 784598712 bytes
xfsdump: dump size (non-dir files) : 771395904 bytes
xfsdump: dump complete: 10 seconds elapsed
xfsdump: Dump Status: SUCCESS
xfsrestore: restore complete: 10 seconds elapsed
xfsrestore: Restore Status: SUCCESS
]0;root@lvm03:~[root@lvm03 ~]# for i in /proc/ /sys/ /dev/ /run/ /boot/; do mount --bind $i /mnt/$i; done
]0;root@lvm03:~[root@lvm03 ~]# chroot /mnt/
]0;root@lvm03:/[?1034h[root@lvm03 /]# grub2-mkconfig -o /boot/grub2/grub.cfg
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-3.10.0-862.2.3.el7.x86_64
Found initrd image: /boot/initramfs-3.10.0-862.2.3.el7.x86_64.img
done
]0;root@lvm03:/[root@lvm03 /]# cd /boot ; for i in `ls initramfs-*img`; do dracut -v $i `echo $i|sed "s/initramfs-//g;
> s/.img//g"` --force; done
Executing: /sbin/dracut -v initramfs-3.10.0-862.2.3.el7.x86_64.img 3.10.0-862.2.3.el7.x86_64 --force
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
*** Including module: bash ***
*** Including module: nss-softokn ***
*** Including module: i18n ***
*** Including module: drm ***
*** Including module: plymouth ***
*** Including module: dm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 60-persistent-storage-dm.rules
Skipping udev rule: 55-dm.rules
*** Including module: kernel-modules ***
Omitting driver floppy
*** Including module: lvm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 56-lvm.rules
Skipping udev rule: 60-persistent-storage-lvm.rules
*** Including module: qemu ***
*** Including module: resume ***
*** Including module: rootfs-block ***
*** Including module: terminfo ***
*** Including module: udev-rules ***
Skipping udev rule: 40-redhat-cpu-hotplug.rules
Skipping udev rule: 91-permissions.rules
*** Including module: biosdevname ***
*** Including module: systemd ***
*** Including module: usrmount ***
*** Including module: base ***
*** Including module: fs-lib ***
*** Including module: shutdown ***
*** Including modules done ***
*** Installing kernel module dependencies and firmware ***
*** Installing kernel module dependencies and firmware done ***
*** Resolving executable dependencies ***
*** Resolving executable dependencies done***
*** Hardlinking files ***
*** Hardlinking files done ***
*** Stripping files ***
*** Stripping files done ***
*** Generating early-microcode cpio image contents ***
*** No early-microcode cpio image needed ***
*** Store current command line parameters ***
*** Creating image file ***
*** Creating image file done ***
*** Creating initramfs image file '/boot/initramfs-3.10.0-862.2.3.el7.x86_64.img' done ***
]0;root@lvm03:/boot[root@lvm03 boot]# lsblk
NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                       8:0    0   40G  0 disk 
â”œâ”€sda1                    8:1    0    1M  0 part 
â”œâ”€sda2                    8:2    0    1G  0 part /boot
â””â”€sda3                    8:3    0   39G  0 part 
  â”œâ”€VolGroup00-LogVol00 253:0    0 37.5G  0 lvm  
  â””â”€VolGroup00-LogVol01 253:1    0  1.5G  0 lvm  [SWAP]
sdb                       8:16   0   10G  0 disk 
â””â”€vgroot-lvroot         253:2    0   10G  0 lvm  /
sdc                       8:32   0    2G  0 disk 
sdd                       8:48   0    1G  0 disk 
sde                       8:64   0    1G  0 disk 
]0;root@lvm03:/boot[root@lvm03 boot]# cat [K[K[K[Kvi /boot/grub2/grub.cfg
[?1049h[?1h=[1;30r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[30;1H"/boot/grub2/grub.cfg" 127L, 3656C[1;1H#
# DO NOT EDIT THIS FILE
#
# It is automatically generated by grub2-mkconfig using templates
# from /etc/grub.d and settings from /etc/default/grub
#

### BEGIN /etc/grub.d/00_header ###
set pager=1

if [ -s $prefix/grubenv ]; then
  load_env
fi
if [ "${next_entry}" ] ; then
   set default="${next_entry}"
   set next_entry=
   save_env next_entry
   set boot_once=true
else
   set default="${saved_entry}"
fi

if [ x"${feature_menuentry_id}" = xy ]; then
  menuentry_id_option="--id"
else
  menuentry_id_option=""
fi

export menuentry_id_option[1;1H[?12l[?25h[?25l[30;1H[1m-- INSERT --[m[30;13H[K[1;1H[?12l[?25h



























[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hif [ "${prev_saved_entry}" ]; then[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hset saved_entry="${prev_saved_entry}"[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hsave_env saved_entry[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hset prev_saved_entry=[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hsave_env prev_saved_entry[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hset boot_once=true[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hfi[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hfunction savedefault {[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hif [ -z "${boot_once}" ]; then[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hsaved_entry="${chosen}"[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hsave_env saved_entry[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hfi[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H}[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hfunction load_video {[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hif [ x$feature_all_video_module = xy ]; then[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod all_video[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Helse[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod efi_gop[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod efi_uga[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod ieee1275_fb[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod vbe[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod vga[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod video_bochs[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod video_cirrus[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hfi[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H}[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hterminal_output console[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hif [ x$feature_timeout_style = xy ] ; then[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hset timeout_style=menu[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hset timeout=1[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H# Fallback normal timeout code in case the timeout_style feature is[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H# unavailable.[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Helse[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hset timeout=1[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hfi[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### END /etc/grub.d/00_header ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### BEGIN /etc/grub.d/00_tuned ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hset tuned_params=""[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hset tuned_initrd=""[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### END /etc/grub.d/00_tuned ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### BEGIN /etc/grub.d/01_users ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hif [ -f ${prefix}/user.cfg ]; then[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hsource ${prefix}/user.cfg[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hif [ -n "${GRUB2_PASSWORD}" ]; then[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hset superusers="root"[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hexport superusers[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hpassword_pbkdf2 root ${GRUB2_PASSWORD}[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hfi[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hfi[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### END /etc/grub.d/01_users ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### BEGIN /etc/grub.d/10_linux ###[?12l[?25h[?25l[1;29r[1;1H[2M[1;30r[28;1Hmenuentry 'CentOS Linux (3.10.0-862.2.3.el7.x86_64) 7 (Core)' --class centos --class gnu-linux --class gnu --class os ---[29;1Hunrestricted $menuentry_id_option 'gnulinux-3.10.0-862.2.3.el7.x86_64-advanced-1b962a5f-7aeb-4f52-a2f7-d53d0abe7bf5' {[28;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hload_video[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hset gfxpayload=keep[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hinsmod gzio[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hinsmod part_msdos[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hinsmod xfs[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hset root='hd0,msdos2'[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hif [ x$feature_platform_search_hint = xy ]; then[?12l[?25h[?25l[1;29r[1;1H[2M[1;30r[28;11Hsearch --no-floppy --fs-uuid --set=root --hint-bios=hd0,msdos2 --hint-efi=hd0,msdos2 --hint-baremetal=ahci0,mss[29;1Hdos2  570897ca-e759-4c81-90cf-389da6eee4cc[28;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Helse[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;11Hsearch --no-floppy --fs-uuid --set=root 570897ca-e759-4c81-90cf-389da6eee4cc[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hfi[?12l[?25h[?25l[1;29r[1;1H[3M[1;30r[27;9Hlinux16 /vmlinuz-3.10.0-862.2.3.el7.x86_64 root=/dev/mapper/vgroot-lvroot ro no_timer_check console=tty0 consolee[28;1H=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto rd.lvm.lv=VolGroup00/LogVol00 rd.lvm.lv=VolGrr[29;1Houp00/LogVol01 rhgb quiet[27;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hinitrd16 /initramfs-3.10.0-862.2.3.el7.x86_64.img[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H}[?12l[?25h[?25l[1;29r[1;1H[2M[1;30r[28;1Hif [ "x$default" = 'CentOS Linux (3.10.0-862.2.3.el7.x86_64) 7 (Core)' ]; then default='Advanced options for CentOS Linuu[29;1Hx>CentOS Linux (3.10.0-862.2.3.el7.x86_64) 7 (Core)'; fi;[28;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### END /etc/grub.d/10_linux ###[?12l[?25h[27;1H[26;1H[25;1H[22;1H[21;1H
[8C[8C/[7C-3.10.0-862.2.3.el7.[7Croot=/dev/mapper/vgroot-[7Cro [15C[7C=tty0 
=ttyS0,[9Cnet.[7C=0 [11C=0 [8C=noop [11C=auto rd.lvm.lv=[10C/[9Crd.[?25l rd.lvm.lv=VolGroo[24;1Hup00/LogVol01 rhgb quiet [23;104H[?12l[?25h[?25l rd.lvm.lv=VolGrouu[24;1Hp00/LogVol01 rhgb quiet [23;103H[?12l[?25h[?25l rd.lvm.lv=VolGroupp[24;1H00/LogVol01 rhgb quiet [23;102H[?12l[?25h[?25l rd.lvm.lv=VolGroup00[24;1H0/LogVol01 rhgb quiet [23;101H[?12l[?25h[?25l rd.lvm.lv=VolGroup000[24;1H/LogVol01 rhgb quiet [23;100H[?12l[?25h[?25l rd.lvm.lv=VolGroup00//[24;1HLogVol01 rhgb quiet [23;99H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LL[24;1HogVol01 rhgb quiet [23;98H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/Loo[24;1HgVol01 rhgb quiet [23;97H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/Logg[24;1HVol01 rhgb quiet [23;96H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVV[24;1Hol01 rhgb quiet [23;95H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVoo[24;1Hl01 rhgb quiet [23;94H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVoll[24;1H01 rhgb quiet [23;93H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol00[24;1H1 rhgb quiet [23;92H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol011[24;1H rhgb quiet [23;91H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol01  [24;1Hrhgb quiet [23;90H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol01 rr[24;1Hhgb quiet [23;89H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol01 rhh[24;1Hgb quiet [23;88H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol01 rhgg[24;1Hb quiet [23;87H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol01 rhgbb[24;1H quiet [23;86H[?12l[?25h[?25l<S-Insert> rd.lvm.lv=VolGroup00/Logg[24;1HVol01 rhgb quiet[23;96H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVV[24;1Hol01 rhgb quiet [23;95H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVoo[24;1Hl01 rhgb quiet [23;94H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVoll[24;1H01 rhgb quiet [23;93H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol00[24;1H1 rhgb quiet [23;92H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol011[24;1H rhgb quiet [23;91H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol01  [24;1Hrhgb quiet [23;90H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol01 rr[24;1Hhgb quiet [23;89H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol01 rhh[24;1Hgb quiet [23;88H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol01 rhgg[24;1Hb quiet [23;87H[?12l[?25h[?25l rd.lvm.lv=VolGroup00/LogVol01 rhgbb[24;1H quiet [23;86H[?12l[?25h[?25lvgroot-lvroot rd.lvm.lv=VolGroup00//[24;1HLogVol01 rhgb quiet[23;99H[?12l[?25h[?25llvroot rd.lvm.lv=VolGroup00/LL[24;1HogVol01 rhgb quiet [23;92H[?12l[?25h[?25l/lvroot rd.lvm.lv=VolGroup00//[24;1HLogVol01 rhgb quiet[23;93H[?12l[?25hlvroot rd.lvm.lv=VolGroup00
LogVol01 [30;1H[K[24;8H[?25l[?12l[?25h[25;57H
[28;57H[29;32H[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### BEGIN /etc/grub.d/20_linux_xen ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### END /etc/grub.d/20_linux_xen ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### BEGIN /etc/grub.d/20_ppc_terminfo ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### END /etc/grub.d/20_ppc_terminfo ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[1;1H[2M[1;30r[28;1H### BEGIN /etc/grub.d/30_os-prober ###
### END /etc/grub.d/30_os-prober ###[28;38H[?12l[?25h[29;36H[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### BEGIN /etc/grub.d/40_custom ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H# This file provides an easy way to add custom menu entries.  Simply type the[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H# menu entries you want to add after this comment.  Be careful not to change[?12l[?25h[?25l
:[?12l[?25hwq[?25l"grub2/grub.cfg" 127L, 3650C written
[?1l>[?12l[?25h[?1049l]0;root@lvm03:/boot[root@lvm03 boot]# exit
]0;root@lvm03:~[root@lvm03 ~]# reboot
Connection to 127.0.0.1 closed by remote host.
Connection to 127.0.0.1 closed.
]0;tesla@ol85:~/homework03[tesla@ol85 homework03]$ vagrant ssh
Last login: Fri Feb 11 10:49:56 2022 from 10.0.2.2
]0;vagrant@lvm03:~[?1034h[vagrant@lvm03 ~]$ lsblk
NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                       8:0    0   40G  0 disk 
â”œâ”€sda1                    8:1    0    1M  0 part 
â”œâ”€sda2                    8:2    0    1G  0 part /boot
â””â”€sda3                    8:3    0   39G  0 part 
  â”œâ”€VolGroup00-LogVol01 253:1    0  1.5G  0 lvm  [SWAP]
  â””â”€VolGroup00-LogVol00 253:2    0 37.5G  0 lvm  
sdb                       8:16   0   10G  0 disk 
â””â”€vgroot-lvroot         253:0    0   10G  0 lvm  /
sdc                       8:32   0    2G  0 disk 
sdd                       8:48   0    1G  0 disk 
sde                       8:64   0    1G  0 disk 
]0;vagrant@lvm03:~[vagrant@lvm03 ~]$ sudo -i
]0;root@lvm03:~[?1034h[root@lvm03 ~]# lvremove /dev/VolGroup00/LogVol00
Do you really want to remove active logical volume VolGroup00/LogVol00? [y/n]: y
  Logical volume "LogVol00" successfully removed
]0;root@lvm03:~[root@lvm03 ~]# lvcreate -m LogVol00 _[K-L8G VolGroup00
  Invalid argument for --mirrors: LogVol00
  Error during parsing of command line.
]0;root@lvm03:~[root@lvm03 ~]# lvcreate -m LogVol00 -L8G VolGroup00[1P[1@n
WARNING: xfs signature detected on /dev/VolGroup00/LogVol00 at offset 0. Wipe it? [y/n]: y
  Wiping xfs signature on /dev/VolGroup00/LogVol00.
  Logical volume "LogVol00" created.
]0;root@lvm03:~[root@lvm03 ~]# mkfs.xfs /dev/VolGroup00/LogVol00
meta-data=/dev/VolGroup00/LogVol00 isize=512    agcount=4, agsize=524288 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=0, sparse=0
data     =                       bsize=4096   blocks=2097152, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
]0;root@lvm03:~[root@lvm03 ~]# mount /dev/VolGroup00/LogVol00 /mnt
]0;root@lvm03:~[root@lvm03 ~]# xfsdump -J - /dev/vgroot/lvrott[K[Kot | xfsrestore -J - /mnt
xfsdump: using file dump (drive_simple) strategy
xfsdump: version 3.1.7 (dump format 3.0)
xfsdump: level 0 dump of lvm03:/
xfsdump: dump date: Fri Feb 11 11:00:26 2022
xfsdump: session id: 3456c9a4-7c25-4c67-b5a9-1a85b9f716c9
xfsdump: session label: ""
xfsrestore: using file dump (drive_simple) strategy
xfsrestore: version 3.1.7 (dump format 3.0)
xfsrestore: searching media for dump
xfsdump: ino map phase 1: constructing initial dump list
xfsdump: ino map phase 2: skipping (no pruning necessary)
xfsdump: ino map phase 3: skipping (only one dump stream)
xfsdump: ino map construction complete
xfsdump: estimated dump size: 806492288 bytes
xfsdump: creating dump session media file 0 (media 0, file 0)
xfsdump: dumping ino map
xfsdump: dumping directories
xfsrestore: examining media file 0
xfsrestore: dump description: 
xfsrestore: hostname: lvm03
xfsrestore: mount point: /
xfsrestore: volume: /dev/mapper/vgroot-lvroot
xfsrestore: session time: Fri Feb 11 11:00:26 2022
xfsrestore: level: 0
xfsrestore: session label: ""
xfsrestore: media label: ""
xfsrestore: file system id: 1b962a5f-7aeb-4f52-a2f7-d53d0abe7bf5
xfsrestore: session id: 3456c9a4-7c25-4c67-b5a9-1a85b9f716c9
xfsrestore: media id: 97e86852-0d83-4687-87da-d628c8b84b99
xfsrestore: searching media for directory dump
xfsrestore: reading directories
xfsdump: dumping non-directory files
xfsrestore: 2720 directories and 23677 entries processed
xfsrestore: directory post-processing
xfsrestore: restoring non-directory files
xfsdump: ending media file
xfsdump: media file size 783220952 bytes
xfsdump: dump size (non-dir files) : 770014448 bytes
xfsdump: dump complete: 15 seconds elapsed
xfsdump: Dump Status: SUCCESS
xfsrestore: restore complete: 15 seconds elapsed
xfsrestore: Restore Status: SUCCESS
]0;root@lvm03:~[root@lvm03 ~]#  for i in /proc/ /sys/ /dev/ /run/ /boot/; do mount --bind $i /mnt/$i; done
]0;root@lvm03:~[root@lvm03 ~]# chroot /mnt
]0;root@lvm03:/[?1034h[root@lvm03 /]# grub2-mkconfig -o /boot/grub2/grub.cfg
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-3.10.0-862.2.3.el7.x86_64
Found initrd image: /boot/initramfs-3.10.0-862.2.3.el7.x86_64.img
done
]0;root@lvm03:/[root@lvm03 /]#  cd /boot ; for i in `ls initramfs-*img`; do dracut -v $i `echo $i|sed "s/initramfs-//g;
> s/.img//g"` --force; done
Executing: /sbin/dracut -v initramfs-3.10.0-862.2.3.el7.x86_64.img 3.10.0-862.2.3.el7.x86_64 --force
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
*** Including module: bash ***
*** Including module: nss-softokn ***
*** Including module: i18n ***
*** Including module: drm ***
*** Including module: plymouth ***
*** Including module: dm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 60-persistent-storage-dm.rules
Skipping udev rule: 55-dm.rules
*** Including module: kernel-modules ***
Omitting driver floppy
*** Including module: lvm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 56-lvm.rules
Skipping udev rule: 60-persistent-storage-lvm.rules
*** Including module: qemu ***
*** Including module: resume ***
*** Including module: rootfs-block ***
*** Including module: terminfo ***
*** Including module: udev-rules ***
Skipping udev rule: 40-redhat-cpu-hotplug.rules
Skipping udev rule: 91-permissions.rules
*** Including module: biosdevname ***
*** Including module: systemd ***
*** Including module: usrmount ***
*** Including module: base ***
*** Including module: fs-lib ***
*** Including module: shutdown ***
*** Including modules done ***
*** Installing kernel module dependencies and firmware ***
*** Installing kernel module dependencies and firmware done ***
*** Resolving executable dependencies ***
*** Resolving executable dependencies done***
*** Hardlinking files ***
*** Hardlinking files done ***
*** Stripping files ***
*** Stripping files done ***
*** Generating early-microcode cpio image contents ***
*** No early-microcode cpio image needed ***
*** Store current command line parameters ***
*** Creating image file ***
*** Creating image file done ***
*** Creating initramfs image file '/boot/initramfs-3.10.0-862.2.3.el7.x86_64.img' done ***
]0;root@lvm03:/boot[root@lvm03 boot]# pvcreate /dev/sd{c,d}
  Physical volume "/dev/sdc" successfully created.
  Physical volume "/dev/sdd" successfully created.
]0;root@lvm03:/boot[root@lvm03 boot]# vgcreate vgvar /dev/sd{c.[K,d}
  Volume group "vgvar" successfully created
]0;root@lvm03:/boot[root@lvm03 boot]# lvcreate -L950M -m1 -n lvvar vgvar
  Rounding up size to full physical extent 952.00 MiB
  Logical volume "lvvar" created.
]0;root@lvm03:/boot[root@lvm03 boot]# mkfs.ext4 /vf[K[Kdev/vgvar/lvvar
mke2fs 1.42.9 (28-Dec-2013)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
60928 inodes, 243712 blocks
12185 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=249561088
8 block groups
32768 blocks per group, 32768 fragments per group
7616 inodes per group
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376

Allocating group tables: 0/8   done                            
Writing inode tables: 0/8   done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: 0/8   done

]0;root@lvm03:/boot[root@lvm03 boot]# mount /dev/vgvar/lvvar /mnt
]0;root@lvm03:/boot[root@lvm03 boot]# cp -aR /var/* /mnt/
]0;root@lvm03:/boot[root@lvm03 boot]# mkdir /tmp/oldvar && mv /var/* /tmp/oldvar
]0;root@lvm03:/boot[root@lvm03 boot]#  umount /mnt
]0;root@lvm03:/boot[root@lvm03 boot]# mount /dev/vg_var/lv_var /var[1P[C[C[C[C[C[C[C[1P[C[C[C[C[C[C[C[C
]0;root@lvm03:/boot[root@lvm03 boot]#  echo "`blkid | grep var: | awk '{print $2}'` /var ext4 defaults 0 0" >> /etc/fstab
]0;root@lvm03:/boot[root@lvm03 boot]# cat /etc/fstab

#
# /etc/fstab
# Created by anaconda on Sat May 12 18:50:26 2018
#
# Accessible filesystems, by reference, are maintained under '/dev/disk'
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
#
/dev/mapper/VolGroup00-LogVol00 /                       xfs     defaults        0 0
UUID=570897ca-e759-4c81-90cf-389da6eee4cc /boot                   xfs     defaults        0 0
/dev/mapper/VolGroup00-LogVol01 swap                    swap    defaults        0 0
#VAGRANT-BEGIN
# The contents below are automatically generated by Vagrant. Do not modify.
#VAGRANT-END
UUID="573a7f41-5e18-4266-bf95-753d0df66e63" /var ext4 defaults 0 0
]0;root@lvm03:/boot[root@lvm03 boot]# vi /boot/fstab[K[K[K[K[Kgrub2/grub.cfg 
[?1049h[?1h=[1;30r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[30;1H"/boot/grub2/grub.cfg" 127L, 3662C[1;1H#
# DO NOT EDIT THIS FILE
#
# It is automatically generated by grub2-mkconfig using templates
# from /etc/grub.d and settings from /etc/default/grub
#

### BEGIN /etc/grub.d/00_header ###
set pager=1

if [ -s $prefix/grubenv ]; then
  load_env
fi
if [ "${next_entry}" ] ; then
   set default="${next_entry}"
   set next_entry=
   save_env next_entry
   set boot_once=true
else
   set default="${saved_entry}"
fi

if [ x"${feature_menuentry_id}" = xy ]; then
  menuentry_id_option="--id"
else
  menuentry_id_option=""
fi

export menuentry_id_option[1;1H[?12l[?25h



























[?25l[1;29r[29;1H
[1;30r[30;1H[K[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hif [ "${prev_saved_entry}" ]; then[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hset saved_entry="${prev_saved_entry}"[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hsave_env saved_entry[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hset prev_saved_entry=[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hsave_env prev_saved_entry[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hset boot_once=true[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hfi[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hfunction savedefault {[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hif [ -z "${boot_once}" ]; then[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hsaved_entry="${chosen}"[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hsave_env saved_entry[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hfi[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H}[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hfunction load_video {[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hif [ x$feature_all_video_module = xy ]; then[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod all_video[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Helse[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod efi_gop[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod efi_uga[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod ieee1275_fb[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod vbe[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod vga[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod video_bochs[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hinsmod video_cirrus[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hfi[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H}[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hterminal_output console[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hif [ x$feature_timeout_style = xy ] ; then[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hset timeout_style=menu[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hset timeout=1[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H# Fallback normal timeout code in case the timeout_style feature is[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H# unavailable.[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Helse[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hset timeout=1[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hfi[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### END /etc/grub.d/00_header ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### BEGIN /etc/grub.d/00_tuned ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hset tuned_params=""[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hset tuned_initrd=""[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### END /etc/grub.d/00_tuned ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### BEGIN /etc/grub.d/01_users ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hif [ -f ${prefix}/user.cfg ]; then[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hsource ${prefix}/user.cfg[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hif [ -n "${GRUB2_PASSWORD}" ]; then[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hset superusers="root"[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hexport superusers[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;5Hpassword_pbkdf2 root ${GRUB2_PASSWORD}[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;3Hfi[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1Hfi[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### END /etc/grub.d/01_users ###[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;1H### BEGIN /etc/grub.d/10_linux ###[?12l[?25h[?25l[1;29r[1;1H[2M[1;30r[28;1Hmenuentry 'CentOS Linux (3.10.0-862.2.3.el7.x86_64) 7 (Core)' --class centos --class gnu-linux --class gnu --class os ---[29;1Hunrestricted $menuentry_id_option 'gnulinux-3.10.0-862.2.3.el7.x86_64-advanced-60c3f1c0-018e-4344-844d-619720d1c61b' {[28;1H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hload_video[29;8H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hset gfxpayload=keep[29;8H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hinsmod gzio[29;8H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hinsmod part_msdos[29;8H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hinsmod xfs[29;8H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hset root='hd0,msdos2'[29;8H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hif [ x$feature_platform_search_hint = xy ]; then[29;8H[?12l[?25h[?25l[1;29r[1;1H[2M[1;30r[28;11Hsearch --no-floppy --fs-uuid --set=root --hint-bios=hd0,msdos2 --hint-efi=hd0,msdos2 --hint-baremetal=ahci0,mss[29;1Hdos2  570897ca-e759-4c81-90cf-389da6eee4cc[28;8H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Helse[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;11Hsearch --no-floppy --fs-uuid --set=root 570897ca-e759-4c81-90cf-389da6eee4cc[29;8H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hfi[?12l[?25h[?25l[1;29r[1;1H[3M[1;30r[27;9Hlinux16 /vmlinuz-3.10.0-862.2.3.el7.x86_64 root=/dev/mapper/VolGroup00-LogVol00 ro no_timer_check console=tty0 cc[28;1Honsole=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto rd.lvm.lv=VolGroup00/LogVol00 rd.lvm.lvv[29;1H=VolGroup00/LogVol01 rhgb quiet[27;8H[?12l[?25h[?25l[1;29r[29;1H
[1;30r[29;9Hinitrd16 /initramfs-3.10.0-862.2.3.el7.x86_64.img[29;8H[?12l[?25h[?25l
:[?12l[?25hq[?25l[30;1H[K[30;1H[?1l>[?12l[?25h[?1049l]0;root@lvm03:/boot[root@lvm03 boot]# exit
]0;root@lvm03:~[root@lvm03 ~]# reboot
Connection to 127.0.0.1 closed by remote host.
Connection to 127.0.0.1 closed.
]0;tesla@ol85:~/homework03[tesla@ol85 homework03]$ vagrant ssh[1Pupssh
]0;tesla@ol85:~/homework03[tesla@ol85 homework03]$ vagrant ssh
Last login: Fri Feb 11 10:57:26 2022 from 10.0.2.2
]0;vagrant@lvm03:~[?1034h[vagrant@lvm03 ~]$ lsblk
NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                       8:0    0   40G  0 disk 
â”œâ”€sda1                    8:1    0    1M  0 part 
â”œâ”€sda2                    8:2    0    1G  0 part /boot
â””â”€sda3                    8:3    0   39G  0 part 
  â”œâ”€VolGroup00-LogVol00 253:0    0    8G  0 lvm  /
  â””â”€VolGroup00-LogVol01 253:1    0  1.5G  0 lvm  [SWAP]
sdb                       8:16   0   10G  0 disk 
â””â”€vgroot-lvroot         253:7    0   10G  0 lvm  
sdc                       8:32   0    2G  0 disk 
â”œâ”€vgvar-lvvar_rmeta_0   253:2    0    4M  0 lvm  
â”‚ â””â”€vgvar-lvvar         253:6    0  952M  0 lvm  /var
â””â”€vgvar-lvvar_rimage_0  253:3    0  952M  0 lvm  
  â””â”€vgvar-lvvar         253:6    0  952M  0 lvm  /var
sdd                       8:48   0    1G  0 disk 
â”œâ”€vgvar-lvvar_rmeta_1   253:4    0    4M  0 lvm  
â”‚ â””â”€vgvar-lvvar         253:6    0  952M  0 lvm  /var
â””â”€vgvar-lvvar_rimage_1  253:5    0  952M  0 lvm  
  â””â”€vgvar-lvvar         253:6    0  952M  0 lvm  /var
sde                       8:64   0    1G  0 disk 
]0;vagrant@lvm03:~[vagrant@lvm03 ~]$ sudo -i
]0;root@lvm03:~[?1034h[root@lvm03 ~]# lvremove /dev/vgroot/lvroot 
Do you really want to remove active logical volume vgroot/lvroot? [y/n]: y
  Logical volume "lvroot" successfully removed
]0;root@lvm03:~[root@lvm03 ~]# vgremove vgroot
  Volume group "vgroot" successfully removed
]0;root@lvm03:~[root@lvm03 ~]# pvremove dev[K[K[K/dev/sdb
  Labels on physical volume "/dev/sdb" successfully wiped.
]0;root@lvm03:~[root@lvm03 ~]# lvcreate -n LogVolHome -L2G /dev[K[K[K[KVolGroup00
  Logical volume "LogVolHome" created.
]0;root@lvm03:~[root@lvm03 ~]# mkfs.xfs /dev/VolGroup00/LogVolHome 
meta-data=/dev/VolGroup00/LogVolHome isize=512    agcount=4, agsize=131072 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=0, sparse=0
data     =                       bsize=4096   blocks=524288, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
]0;root@lvm03:~[root@lvm03 ~]# mount /dev/VolGroup00/LogVolHome /mnt
]0;root@lvm03:~[root@lvm03 ~]# cp -aR /home/* /mnt/
]0;root@lvm03:~[root@lvm03 ~]# rm -rf /home/*
]0;root@lvm03:~[root@lvm03 ~]# umount /mnt
]0;root@lvm03:~[root@lvm03 ~]# mount /dev/VolGroup00/Lov[KgVolHome /home
]0;root@lvm03:~[root@lvm03 ~]# lsblk
NAME                      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                         8:0    0   40G  0 disk 
â”œâ”€sda1                      8:1    0    1M  0 part 
â”œâ”€sda2                      8:2    0    1G  0 part /boot
â””â”€sda3                      8:3    0   39G  0 part 
  â”œâ”€VolGroup00-LogVol00   253:0    0    8G  0 lvm  /
  â”œâ”€VolGroup00-LogVol01   253:1    0  1.5G  0 lvm  [SWAP]
  â””â”€VolGroup00-LogVolHome 253:7    0    2G  0 lvm  /home
sdb                         8:16   0   10G  0 disk 
sdc                         8:32   0    2G  0 disk 
â”œâ”€vgvar-lvvar_rmeta_0     253:2    0    4M  0 lvm  
â”‚ â””â”€vgvar-lvvar           253:6    0  952M  0 lvm  /var
â””â”€vgvar-lvvar_rimage_0    253:3    0  952M  0 lvm  
  â””â”€vgvar-lvvar           253:6    0  952M  0 lvm  /var
sdd                         8:48   0    1G  0 disk 
â”œâ”€vgvar-lvvar_rmeta_1     253:4    0    4M  0 lvm  
â”‚ â””â”€vgvar-lvvar           253:6    0  952M  0 lvm  /var
â””â”€vgvar-lvvar_rimage_1    253:5    0  952M  0 lvm  
  â””â”€vgvar-lvvar           253:6    0  952M  0 lvm  /var
sde                         8:64   0    1G  0 disk 
]0;root@lvm03:~[root@lvm03 ~]# echo "`blkid | grep Home | awk '{print $2}'` /home xfs defaults 0 0" >> /etc/fstab
]0;root@lvm03:~[root@lvm03 ~]# echo "`blkid | grep Home | awk '{print $2}'` /home xfs defaults 0 0" >> /etc/fstab[K[K[K[K[K[K[K[K[K[K[K[K[K[K
UUID="4fc3c1dc-16ac-4ec2-abd1-5a1966150ca1" /home xfs defaults 0 0
]0;root@lvm03:~[root@lvm03 ~]# touch /home/file{1..20}
]0;root@lvm03:~[root@lvm03 ~]# lvcreate -L100MB -s -n homesnap /dev/Vol[K[K[K[K[K[K[K[KLogVolHome
  The origin name should include the volume group.
  Run `lvcreate --help' for more information.
]0;root@lvm03:~[root@lvm03 ~]# lvcreate -L100MB -s -n homesnap LogVolHome[CVLogVolHomeoLogVolHomelLogVolHomeGLogVolHomerLogVolHomeoLogVolHomepLogVolHome[1PLogVolHomeiLogVolHome[1PLogVolHomeuLogVolHomep00LogVolHome/LogVolHome
  Rounding up size to full physical extent 128.00 MiB
  Logical volume "homesnap" created.
]0;root@lvm03:~[root@lvm03 ~]#  rm -f /home/file{11..20}
]0;root@lvm03:~[root@lvm03 ~]# umount /home
]0;root@lvm03:~[root@lvm03 ~]# lvconvert --merge /[KVolGrouo00/Home[K[K[K[Khomesnap
  Volume group "VolGrouo00" not found
  Cannot process volume group VolGrouo00
]0;root@lvm03:~[root@lvm03 ~]# lvconvert --merge VolGrouo00/homesnap/VolGrouo00/homesnapdVolGrouo00/homesnapeVolGrouo00/homesnapvVolGrouo00/homesnap/VolGrouo00/homesnap
  Volume group "VolGrouo00" not found
  Cannot process volume group VolGrouo00
]0;root@lvm03:~[root@lvm03 ~]# lvconvert --merge /dev/VolGrouo00/homesnap[C[5PVolGrouo00/homesnap[1P00/homesnapp00/homesnap
  Merging of volume VolGroup00/homesnap started.
  VolGroup00/LogVolHome: Merged: 100.00%
]0;root@lvm03:~[root@lvm03 ~]# mount /home
]0;root@lvm03:~[root@lvm03 ~]# df -Th
Filesystem                        Type      Size  Used Avail Use% Mounted on
/dev/mapper/VolGroup00-LogVol00   xfs       8.0G  807M  7.3G  10% /
devtmpfs                          devtmpfs  110M     0  110M   0% /dev
tmpfs                             tmpfs     118M     0  118M   0% /dev/shm
tmpfs                             tmpfs     118M  4.5M  114M   4% /run
tmpfs                             tmpfs     118M     0  118M   0% /sys/fs/cgroup
/dev/sda2                         xfs      1014M   61M  954M   6% /boot
/dev/mapper/vgvar-lvvar           ext4      922M  181M  678M  22% /var
/dev/mapper/VolGroup00-LogVolHome xfs       2.0G   33M  2.0G   2% /home
]0;root@lvm03:~[root@lvm03 ~]# lsblk
NAME                      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                         8:0    0   40G  0 disk 
â”œâ”€sda1                      8:1    0    1M  0 part 
â”œâ”€sda2                      8:2    0    1G  0 part /boot
â””â”€sda3                      8:3    0   39G  0 part 
  â”œâ”€VolGroup00-LogVol00   253:0    0    8G  0 lvm  /
  â”œâ”€VolGroup00-LogVol01   253:1    0  1.5G  0 lvm  [SWAP]
  â””â”€VolGroup00-LogVolHome 253:7    0    2G  0 lvm  /home
sdb                         8:16   0   10G  0 disk 
sdc                         8:32   0    2G  0 disk 
â”œâ”€vgvar-lvvar_rmeta_0     253:2    0    4M  0 lvm  
â”‚ â””â”€vgvar-lvvar           253:6    0  952M  0 lvm  /var
â””â”€vgvar-lvvar_rimage_0    253:3    0  952M  0 lvm  
  â””â”€vgvar-lvvar           253:6    0  952M  0 lvm  /var
sdd                         8:48   0    1G  0 disk 
â”œâ”€vgvar-lvvar_rmeta_1     253:4    0    4M  0 lvm  
â”‚ â””â”€vgvar-lvvar           253:6    0  952M  0 lvm  /var
â””â”€vgvar-lvvar_rimage_1    253:5    0  952M  0 lvm  
  â””â”€vgvar-lvvar           253:6    0  952M  0 lvm  /var
sde                         8:64   0    1G  0 disk 
]0;root@lvm03:~[root@lvm03 ~]# logout
]0;vagrant@lvm03:~[vagrant@lvm03 ~]$ logout
Connection to 127.0.0.1 closed.
]0;tesla@ol85:~/homework03[tesla@ol85 homework03]$ exit

Script done on 2022-02-11 14:18:18+03:00
